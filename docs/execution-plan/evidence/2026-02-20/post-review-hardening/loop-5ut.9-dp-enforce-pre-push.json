{
  "stage": "pre-push",
  "policy": "/Users/rand/src/loop/dp-policy.json",
  "cwd": "/Users/rand/src/loop",
  "ok": true,
  "steps": [
    {
      "name": "check",
      "command": [
        "make",
        "check"
      ],
      "exit_code": 0,
      "duration_ms": 2781,
      "stdout": "cd rlm-core && cargo check --quiet\ncd rlm-core && cargo test --quiet\n\nrunning 641 tests\n....................................................................................... 87/641\n....................................................................................... 174/641\n...........................................................iii......................... 261/641\n....................................................................................... 348/641\n....................................................................................... 435/641\n..................i....i..iiiii........................................................ 522/641\n....................................................................................... 609/641\n................................\ntest result: ok. 631 passed; 0 failed; 10 ignored; 0 measured; 0 filtered out; finished in 0.56s\n\n\nrunning 40 tests\niiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiiii....\ntest result: ok. 4 passed; 0 failed; 36 ignored; 0 measured; 0 filtered out; finished in 1.01s\n\n",
      "stderr": "warning: unused import: `std::path::PathBuf`\n   --> src/dp_integration/review.rs:563:9\n    |\n563 |     use std::path::PathBuf;\n    |         ^^^^^^^^^^^^^^^^^^\n    |\n    = note: `#[warn(unused_imports)]` on by default\n\nwarning: unused imports: `LeanRef`, `LinkSource`, `LinkType`, and `Link`\n   --> src/sync/engine.rs:624:24\n    |\n624 |     use crate::topos::{LeanRef, Link, LinkSource, LinkType, ToposRef};\n    |                        ^^^^^^^  ^^^^  ^^^^^^^^^^  ^^^^^^^^\n\nwarning: unused variable: `action_id`\n   --> src/reasoning/store.rs:743:14\n    |\n743 |         let (action_id, outcome_id) = trace.log_action(&chosen, \"Action\", \"Outcome\");\n    |              ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_action_id`\n    |\n    = note: `#[warn(unused_variables)]` on by default\n\nwarning: unused variable: `questions`\n   --> src/spec_agent/agent.rs:658:13\n    |\n658 |         let questions = agent.refine(&mut ctx, &[]).await.unwrap();\n    |             ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_questions`\n\nwarning: function `probability_with_edges` is never used\n  --> src/epistemic/proptest.rs:27:8\n   |\n27 |     fn probability_with_edges() -> impl Strategy<Value = f64> {\n   |        ^^^^^^^^^^^^^^^^^^^^^^\n   |\n   = note: `#[warn(dead_code)]` on by default\n\nwarning: fields `code`, `language`, `max_issues`, `vulnerabilities`, `severity`, and `confidence` are never read\n   --> src/signature/mod.rs:687:13\n    |\n685 |         struct AnalyzeCode {\n    |                ----------- fields in this struct\n686 |             #[input(desc = \"Source code to analyze\")]\n687 |             code: String,\n    |             ^^^^\n...\n690 |             language: String,\n    |             ^^^^^^^^\n...\n693 |             max_issues: Option<u32>,\n    |             ^^^^^^^^^^\n...\n696 |             vulnerabilities: Vec<String>,\n    |             ^^^^^^^^^^^^^^^\n...\n699 |             severity: String,\n    |             ^^^^^^^^\n...\n702 |             confidence: f64,\n    |             ^^^^^^^^^^\n\nwarning: multiple fields are never read\n   --> src/signature/mod.rs:796:13\n    |\n794 |         struct AllTypes {\n    |                -------- fields in this struct\n795 |             #[input(desc = \"A string\")]\n796 |             string_field: String,\n    |             ^^^^^^^^^^^^\n...\n799 |             int_field: i32,\n    |             ^^^^^^^^^\n...\n802 |             float_field: f64,\n    |             ^^^^^^^^^^^\n...\n805 |             bool_field: bool,\n    |             ^^^^^^^^^^\n...\n808 |             list_field: Vec<String>,\n    |             ^^^^^^^^^^\n...\n811 |             optional_list_field: Option<Vec<i32>>,\n    |             ^^^^^^^^^^^^^^^^^^^\n...\n814 |             array_field: [i32; 2],\n    |             ^^^^^^^^^^^\n...\n817 |             output: String,\n    |             ^^^^^^\n\nwarning: fields `severity` and `category` are never read\n   --> src/signature/mod.rs:838:13\n    |\n835 |         struct EnumAnnotated {\n    |                ------------- fields in this struct\n...\n838 |             severity: String,\n    |             ^^^^^^^^\n...\n842 |             category: String,\n    |             ^^^^^^^^\n\n",
      "ok": true
    },
    {
      "name": "rustdoc-contract",
      "command": [
        "make",
        "rustdoc-check"
      ],
      "exit_code": 0,
      "duration_ms": 168,
      "stdout": "cd rlm-core && RUSTDOCFLAGS=\"-D warnings\" cargo doc --no-deps\n",
      "stderr": "    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.10s\n   Generated /Users/rand/src/loop/rlm-core/target/doc/rlm_core/index.html\n",
      "ok": true
    },
    {
      "name": "python-integration-truth",
      "command": [
        "make",
        "py-integration-gate"
      ],
      "exit_code": 0,
      "duration_ms": 291,
      "stdout": "LOOP_MIN_AVAILABLE_MIB=3072 ./scripts/run_vg_py_integration_gate.sh\n[VG-PY-INTEGRATION-001] running\n============================= test session starts ==============================\nplatform darwin -- Python 3.12.11, pytest-9.0.2, pluggy-1.6.0\nrootdir: /Users/rand/src/loop/rlm-core\nconfigfile: pytest.ini\nplugins: asyncio-1.3.0\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 19 items\n\ntests/integration/test_upgrade_compatibility.py ...................      [100%]\n\n============================== 19 passed in 0.04s ==============================\nVG-PY-INTEGRATION-001: PASS\n",
      "stderr": "safe_run: heavy command admitted (available=5414MiB, threshold=3072MiB)\n",
      "ok": true
    },
    {
      "name": "ignored-repl-stability",
      "command": [
        "make",
        "ignored-repl-gate"
      ],
      "exit_code": 0,
      "duration_ms": 932,
      "stdout": "LOOP_MIN_AVAILABLE_MIB=3072 ./scripts/safe_run.sh bash -lc 'cd /Users/rand/src/loop/rlm-core && cargo test --no-default-features --features gemini test_repl_spawn -- --ignored --test-threads=1 && cargo test --no-default-features --features gemini test_lean_repl_spawn -- --ignored --test-threads=1'\n\nrunning 1 test\ntest repl::tests::test_repl_spawn ... ok\n\ntest result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 640 filtered out; finished in 0.14s\n\n\nrunning 1 test\ntest lean::repl::tests::test_lean_repl_spawn ... ok\n\ntest result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 640 filtered out; finished in 0.41s\n\n",
      "stderr": "safe_run: heavy command admitted (available=5432MiB, threshold=3072MiB)\nwarning: unused import: `std::path::PathBuf`\n   --> src/dp_integration/review.rs:563:9\n    |\n563 |     use std::path::PathBuf;\n    |         ^^^^^^^^^^^^^^^^^^\n    |\n    = note: `#[warn(unused_imports)]` on by default\n\nwarning: unused imports: `LeanRef`, `LinkSource`, `LinkType`, and `Link`\n   --> src/sync/engine.rs:624:24\n    |\n624 |     use crate::topos::{LeanRef, Link, LinkSource, LinkType, ToposRef};\n    |                        ^^^^^^^  ^^^^  ^^^^^^^^^^  ^^^^^^^^\n\nwarning: unused variable: `action_id`\n   --> src/reasoning/store.rs:743:14\n    |\n743 |         let (action_id, outcome_id) = trace.log_action(&chosen, \"Action\", \"Outcome\");\n    |              ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_action_id`\n    |\n    = note: `#[warn(unused_variables)]` on by default\n\nwarning: unused variable: `questions`\n   --> src/spec_agent/agent.rs:658:13\n    |\n658 |         let questions = agent.refine(&mut ctx, &[]).await.unwrap();\n    |             ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_questions`\n\nwarning: function `probability_with_edges` is never used\n  --> src/epistemic/proptest.rs:27:8\n   |\n27 |     fn probability_with_edges() -> impl Strategy<Value = f64> {\n   |        ^^^^^^^^^^^^^^^^^^^^^^\n   |\n   = note: `#[warn(dead_code)]` on by default\n\nwarning: fields `code`, `language`, `max_issues`, `vulnerabilities`, `severity`, and `confidence` are never read\n   --> src/signature/mod.rs:687:13\n    |\n685 |         struct AnalyzeCode {\n    |                ----------- fields in this struct\n686 |             #[input(desc = \"Source code to analyze\")]\n687 |             code: String,\n    |             ^^^^\n...\n690 |             language: String,\n    |             ^^^^^^^^\n...\n693 |             max_issues: Option<u32>,\n    |             ^^^^^^^^^^\n...\n696 |             vulnerabilities: Vec<String>,\n    |             ^^^^^^^^^^^^^^^\n...\n699 |             severity: String,\n    |             ^^^^^^^^\n...\n702 |             confidence: f64,\n    |             ^^^^^^^^^^\n\nwarning: multiple fields are never read\n   --> src/signature/mod.rs:796:13\n    |\n794 |         struct AllTypes {\n    |                -------- fields in this struct\n795 |             #[input(desc = \"A string\")]\n796 |             string_field: String,\n    |             ^^^^^^^^^^^^\n...\n799 |             int_field: i32,\n    |             ^^^^^^^^^\n...\n802 |             float_field: f64,\n    |             ^^^^^^^^^^^\n...\n805 |             bool_field: bool,\n    |             ^^^^^^^^^^\n...\n808 |             list_field: Vec<String>,\n    |             ^^^^^^^^^^\n...\n811 |             optional_list_field: Option<Vec<i32>>,\n    |             ^^^^^^^^^^^^^^^^^^^\n...\n814 |             array_field: [i32; 2],\n    |             ^^^^^^^^^^^\n...\n817 |             output: String,\n    |             ^^^^^^\n\nwarning: fields `severity` and `category` are never read\n   --> src/signature/mod.rs:838:13\n    |\n835 |         struct EnumAnnotated {\n    |                ------------- fields in this struct\n...\n838 |             severity: String,\n    |             ^^^^^^^^\n...\n842 |             category: String,\n    |             ^^^^^^^^\n\nwarning: `rlm-core` (lib test) generated 8 warnings (run `cargo fix --lib -p rlm-core --tests` to apply 2 suggestions)\n    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.09s\n     Running unittests src/lib.rs (target/debug/deps/rlm_core-0bdc05604fa9bebd)\nwarning: unused import: `std::path::PathBuf`\n   --> src/dp_integration/review.rs:563:9\n    |\n563 |     use std::path::PathBuf;\n    |         ^^^^^^^^^^^^^^^^^^\n    |\n    = note: `#[warn(unused_imports)]` on by default\n\nwarning: unused imports: `LeanRef`, `LinkSource`, `LinkType`, and `Link`\n   --> src/sync/engine.rs:624:24\n    |\n624 |     use crate::topos::{LeanRef, Link, LinkSource, LinkType, ToposRef};\n    |                        ^^^^^^^  ^^^^  ^^^^^^^^^^  ^^^^^^^^\n\nwarning: unused variable: `action_id`\n   --> src/reasoning/store.rs:743:14\n    |\n743 |         let (action_id, outcome_id) = trace.log_action(&chosen, \"Action\", \"Outcome\");\n    |              ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_action_id`\n    |\n    = note: `#[warn(unused_variables)]` on by default\n\nwarning: unused variable: `questions`\n   --> src/spec_agent/agent.rs:658:13\n    |\n658 |         let questions = agent.refine(&mut ctx, &[]).await.unwrap();\n    |             ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_questions`\n\nwarning: function `probability_with_edges` is never used\n  --> src/epistemic/proptest.rs:27:8\n   |\n27 |     fn probability_with_edges() -> impl Strategy<Value = f64> {\n   |        ^^^^^^^^^^^^^^^^^^^^^^\n   |\n   = note: `#[warn(dead_code)]` on by default\n\nwarning: fields `code`, `language`, `max_issues`, `vulnerabilities`, `severity`, and `confidence` are never read\n   --> src/signature/mod.rs:687:13\n    |\n685 |         struct AnalyzeCode {\n    |                ----------- fields in this struct\n686 |             #[input(desc = \"Source code to analyze\")]\n687 |             code: String,\n    |             ^^^^\n...\n690 |             language: String,\n    |             ^^^^^^^^\n...\n693 |             max_issues: Option<u32>,\n    |             ^^^^^^^^^^\n...\n696 |             vulnerabilities: Vec<String>,\n    |             ^^^^^^^^^^^^^^^\n...\n699 |             severity: String,\n    |             ^^^^^^^^\n...\n702 |             confidence: f64,\n    |             ^^^^^^^^^^\n\nwarning: multiple fields are never read\n   --> src/signature/mod.rs:796:13\n    |\n794 |         struct AllTypes {\n    |                -------- fields in this struct\n795 |             #[input(desc = \"A string\")]\n796 |             string_field: String,\n    |             ^^^^^^^^^^^^\n...\n799 |             int_field: i32,\n    |             ^^^^^^^^^\n...\n802 |             float_field: f64,\n    |             ^^^^^^^^^^^\n...\n805 |             bool_field: bool,\n    |             ^^^^^^^^^^\n...\n808 |             list_field: Vec<String>,\n    |             ^^^^^^^^^^\n...\n811 |             optional_list_field: Option<Vec<i32>>,\n    |             ^^^^^^^^^^^^^^^^^^^\n...\n814 |             array_field: [i32; 2],\n    |             ^^^^^^^^^^^\n...\n817 |             output: String,\n    |             ^^^^^^\n\nwarning: fields `severity` and `category` are never read\n   --> src/signature/mod.rs:838:13\n    |\n835 |         struct EnumAnnotated {\n    |                ------------- fields in this struct\n...\n838 |             severity: String,\n    |             ^^^^^^^^\n...\n842 |             category: String,\n    |             ^^^^^^^^\n\nwarning: `rlm-core` (lib test) generated 8 warnings (run `cargo fix --lib -p rlm-core --tests` to apply 2 suggestions)\n    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.08s\n     Running unittests src/lib.rs (target/debug/deps/rlm_core-0bdc05604fa9bebd)\n",
      "ok": true
    }
  ]
}
