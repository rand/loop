# M5 - Performance and Efficacy Validation

## Objective

Prove that corrected implementation is not only functionally complete but also operationally effective and non-regressive.

## Entry Criteria

- M4 complete.
- Cross-repo compatibility pipeline available.

## Exit Criteria

- Performance baselines and post-change metrics are captured.
- Typed-signature efficacy scenarios pass deterministically.
- No material regression is observed in consumer validation suites.

## Task Cards

### M5-T01 Performance Benchmark Harness

- Goal: measure critical runtime paths affected by M1-M4.
- Metrics to capture:
- REPL startup latency (P50/P95).
- REPL execute round-trip latency (with and without submit path).
- Batched query throughput and partial-failure behavior.
- Work items:
- Implement repeatable benchmark scripts or harness.
- Record environment metadata with each run.
- Baseline harness scripts: `scripts/run_m5_perf_harness.sh`, `scripts/perf/repl_perf_harness.py`, `scripts/perf/compare_perf_runs.py`.
- Acceptance criteria:
- Baseline and candidate metrics captured with same methodology.
- Required gates: VG-PERF-001, VG-PERF-002

### M5-T02 Efficacy Scenario Suite

- Goal: validate correctness and robustness of typed-signature behavior.
- Scenario classes:
- Valid submit.
- Validation failure cases.
- Fallback and non-submit behavior where applicable.
- Batch-query behavior under mixed success/failure.
- Acceptance criteria:
- Scenario suite yields deterministic pass/fail outcomes.
- Required gates: VG-EFFICACY-001

### M5-T03 Comparative Analysis Report

- Goal: produce go/no-go summary for rollout.
- Work items:
- Compare baseline vs current metrics.
- Identify any >10% regressions and explain causes.
- Propose mitigations for unresolved regressions.
- Acceptance criteria:
- Report is complete and linked from evidence folder.
- Required gates: VG-PERF-001, VG-PERF-002, VG-EFFICACY-001

## Risks

- Benchmark noise can obscure regressions if environment metadata is missing.
- Efficacy coverage gaps can hide protocol edge-case failures.

## Handoff Notes

At M5 completion, proceed to `M6-T01`.
